@model IEnumerable<ComputerStore.Models.Product>

@{ ViewData["Title"] = "Отчет: Остатки на складе"; }

<h1 class="text-primary">Остатки товаров</h1>
<p class="text-muted">Актуальное состояние склада на @DateTime.Now.ToString("g")</p>

<table class="table table-bordered table-striped">
    <thead class="table-dark">
        <tr>
            <th>Артикул</th>
            <th>Товар</th>
            <th>Категория</th>
            <th>Цена</th>
            <th>Остаток (шт)</th>
            <th>Сумма в товаре</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            // Подсветка, если товара мало
            var rowClass = item.Quantity == 0 ? "table-danger" : (item.Quantity < 5 ? "table-warning" : "");
            
            <tr class="@rowClass">
                <td>@item.Code</td>
                <td>@item.Name</td>
                <td>@item.Category?.Name</td>
                <td>@item.Price.ToString("C")</td>
                <td><strong>@item.Quantity</strong></td>
                <td>@((item.Price * item.Quantity).ToString("C"))</td>
            </tr>
        }
    </tbody>
    <tfoot>
        <tr class="table-secondary fw-bold">
            <td colspan="5" class="text-end">ИТОГО СТОИМОСТЬ СКЛАДА:</td>
            <td class="text-primary">@Model.Sum(x => x.Price * x.Quantity).ToString("C")</td>
        </tr>
    </tfoot>
</table>